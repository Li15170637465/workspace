# 嵌入式 C 语言 - Day07总结



## 第 11 章 函数

### 11.6 static 和 extern 关键字

#### ① 静态局部变量（标识符常量、数组）

```
1. 作用域范围仍然是所在的函数
2. 存储在内存的静态区
3. 生命周期延长至程序执行完毕（函数调用结束不释放，下一次调用函数不需要重新创建变量）
4. 如果不显示初始化，系统能够自动初始化为 0。
```

> 除了作用域范围，其他特性同全局变量一致！

#### ② extern 声明其他源文件中的全局标识符

```
1. C 编译器可以将多个源文件编译成一个可执行文件， 这多个源文件属于同一个工程。
2. C 中的全局变量（全局标识符）的作用域范围是整个工程，对整个工程可见。
3. 在某个源文件中如果需要使用其他源文件中定义的全局变量（全局标识符），要使用 extern 声明一下
```

> **extern 关键字的作用：** 用于声明外部全局变量（全局标识符）。

#### ③ 静态全局变量（静态全局标识符）

```
1、 使用 static 关键字修饰的全局变量称为静态全局变量。
2、 普通全局变量对整个工程可见，其他文件中，使用extern外部声明后，可以直接使用。静态全局变量仅对当前文件可见，其他文件不可访问，其他文件中可以定义与其同名的变量，两者互不影响。
3. 静态全局变量对于需要编译多个源代码文件的程序，能够有效地降低源文件之间的耦合，避免不同文件同名变量的冲突。
```

#### ④ 静态函数

```
特点同静态全局变量
```

#### 总结

|              | 可作用范围       | 是否自动初始化 | 内存存储区域 | 生命周期     |
| ------------ | ---------------- | -------------- | ------------ | ------------ |
| 局部变量     | 所在的函数       | 否             | 栈           | 函数调用结束 |
| 静态局部变量 | 所在的函数       | 是             | 静态区       | 程序执行结束 |
| 全局变量     | 全局(整个工程)   | 是             | 静态区       | 程序执行结束 |
| 静态全局变量 | 全局(所在源文件) | 是             | 静态区       | 程序执行结束 |



### 11.7 递归函数

**递归函数的概念**

```
一个函数在函数体内又调用了本身，我们称为递归调用，这样的函数就是递归函数。
```

**递归函数成功执行需满足以下两个条件：**

```
（1）必须有一个明显的结束条件。
（2）必须有一个趋近于结束条件的趋势。
```



### 11.8 常用系统函数（标准库函数）

> 在线手册地址： https://zh.cppreference.com/w/c/header

#### ① 字符串函数

标准库头文件 `<string.h>`

| 函数              | 说明                                           |
| ----------------- | ---------------------------------------------- |
| strlen(str)       | 返回str的长度（size_t类型）                    |
| strcpy(str1,str2) | 将str2中的字符串复制到str1中（给str1重新赋值） |
| strcat(str1,str2) | 将 str2 中的字符串追加到 str1 后面             |

标准库头文件 `<stdio.h>`

| 函数      | 说明                                                         |
| --------- | ------------------------------------------------------------ |
| sprintf() | 用于将格式化数据写入字符串。相比于 printf()，多了一个参数，第一个参数是要写入的字符串，后面参数与 printf() 一致。简单地讲，sprintf() 是将内容写入字符串而不是输出。 |
| sscanf()  | 用于从一个字符串中按照指定的格式提取数据。相比于 scanf()，多了一个参数，第一个参数是要提取数据的字符串，后面参数与 scanf() 一致。简单地讲，sscanf() 是从字符串中提取数据而不是从用户输入提取数据。 |

#### ② 日期时间函数

标准库头文件 `<time.h>`

| 函数                         | 说明                                                         |
| ---------------------------- | ------------------------------------------------------------ |
| time（&变量）                | 获取当前日期赋值到变量中，该变量需是 time_t 类型             |
| ctime（&时间值）             | 将时间戳转为字符串并返回，时间值需是 time_t 类型             |
| difftime（时间值1，时间值2） | 返回两个时间值的差，返回值是 double 类型，时间值需是 time_t 类型 |

> `time_t` 是C语言中用于表示时间值的数据类型，它通常是一个整数类型（`int ``或 long 或 long long`），用于存储时间戳。
>
> 时间戳是指从1970年1月1日（通常称为UNIX纪元）零时零分零秒（UTC时间）起至某一特定时刻所经过的秒数。

#### ③ 数学计算函数

标准库头文件 `<stdio.h>`

| 函数     | 说明          |
| -------- | ------------- |
| sqrt(x)  | 计算平方根    |
| cbrt(x)  | 计算立方根    |
| pow(x,y) | 计算x的y次方  |
| fabs(x)  | 计算x的绝对值 |
| ceil(x)  | 向上取整      |
| floor(x) | 向下取整      |
| round(x) | 四舍五入取整  |
| trunc(c) | 截断小数部分  |

> 以上函数返回的都是 double 类型

## 第 12 章 指针 pointer

### 12.1 指针基础

**什么是指针？**

```
指针就是变量，里面存储的是地址。
```

**内存地址**

```
内存划分为多个内存单元，每个内存单元有个数字编号，该编号就是该内存单元的地址。
64位系统，使用64个二进制数据表式内存地址；32位系统使用32个二进制数表示地址。
```

**定义指针的语法：**

一般格式**：**

```c
数据类型关键字 *指针名;
数据类型关键字 *指针名 = 地址;
```

需要注意的是，以下三种定义指针的写法都是合法的：

```c
数据类型关键字 *指针名;
数据类型关键字 * 指针名;
数据类型关键字* 指针名;
```

**取地址运算符&**

```
一元运算符 
无副作用 
表达式的值是地址
```

**取值运算符*（解引用运算符）**

```
一元运算符 
无副作用 
表达式的值是指针指向的值
```



## 

```
1. 有一堆桃子，猴子第一天吃了其中的一半，并多吃一个。以后每天猴子都吃其中的一半，然后再多吃一个。当到第十天时，想再吃时（注意：此时还没吃），发现只有1个桃子了。问：最初共多少个桃子？ 递归

2. 数组求和
描述：递归计算整型数组所有元素之和。
示例：输入数组 {1, 2, 3, 4}，输出 10

3 定义函数，实现交换两个变量的值； 函数原型 void exchange(int *, int *)
```



